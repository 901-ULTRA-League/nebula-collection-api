openapi: 3.1.0
info:
  title: Nebula ULTRAMAN Cards API
  version: "1.0.0"
  description: |
    Browse and search ULTRAMAN card data, fetch individual cards, and view collection stats.
servers:
  - url: https://nebula-collection-api.vercel.app
paths:
  /:
    get:
      operationId: getRoot
      summary: API index and links
      responses:
        "200":
          description: Index payload
          content:
            application/json:
              schema:
                type: object
                properties:
                  message: {type: string}
                  API_docs: {type: string}
                  cards: {type: string}
                  filters:
                    type: object
                    additionalProperties: {type: string}
                  card by number: {type: string}
                  search: {type: string}
                  stats: {type: string}
                  version: {type: string}
                  copyright: {type: string}
  /cards:
    get:
      operationId: listCards
      summary: List cards with optional filters
      parameters:
        - in: query
          name: name
          schema: {type: string}
          description: Partial card name match
        - in: query
          name: rarity
          schema: {type: string}
          description: Exact rarity (e.g., C, U, R, RR, RRR, RRRR, SP, SSSP, UR, ExP, AP)
        - in: query
          name: level
          schema: {type: string}
          description: Card level (string, e.g., "1", "3", "7")
        - in: query
          name: round
          schema: {type: string}
          description: Round value (string)
        - in: query
          name: character_name
          schema: {type: string}
          description: Partial character name match
        - in: query
          name: feature
          schema: {type: string}
          description: Feature category (e.g., Ultra, Kaiju, Scene)
        - in: query
          name: type
          schema: {type: string}
          description: Card type (e.g., SPEED, POWER, BASIC, ARMED, DEVASTATION, HAZARD, METEO, INVASION)
        - in: query
          name: publication_year
          schema: {type: integer}
          description: Exact publication year
        - in: query
          name: number
          schema: {type: string}
          description: Partial or full card number (e.g., BP04-031)
        - in: query
          name: errata_enable
          schema: {type: boolean}
          description: Filter to errata-enabled cards
        - in: query
          name: limit
          schema:
            type: integer
            minimum: 1
          description: Max cards to return
      responses:
        "200":
          description: Card list
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Card"
  /card/{card_id}:
    get:
      operationId: getCardById
      summary: Fetch a card by its number
      parameters:
        - in: path
          name: card_id
          required: true
          schema: {type: string}
          description: Card number (supports partial match, e.g., BP04-031)
      responses:
        "200":
          description: Card payload or error
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: "#/components/schemas/Card"
                  - $ref: "#/components/schemas/Error"
  /search:
    get:
      operationId: searchCards
      summary: Search cards by name, effect text, or flavor text
      parameters:
        - in: query
          name: q
          required: true
          schema: {type: string}
          description: Search text
      responses:
        "200":
          description: Matching cards
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Card"
  /stats:
    get:
      operationId: getStats
      summary: Collection statistics
      responses:
        "200":
          description: Stats payload
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Stats"
components:
  schemas:
    Card:
      type: object
      properties:
        id: {type: integer}
        name: {type: string}
        ruby: {type: string, nullable: true}
        type_name: {type: string, nullable: true}
        character_name: {type: string, nullable: true}
        rarity: {type: string, nullable: true}
        type: {type: string, nullable: true}
        feature: {type: string, nullable: true}
        level: {type: string, nullable: true}
        round: {type: string, nullable: true}
        battle_power_1: {type: integer, nullable: true}
        battle_power_2: {type: integer, nullable: true}
        battle_power_3: {type: integer, nullable: true}
        battle_power_4: {type: integer, nullable: true}
        battle_power_ex: {type: integer, nullable: true}
        effect: {type: string, nullable: true}
        flavor_text: {type: string, nullable: true}
        section: {type: string, nullable: true}
        bundle_version: {type: integer, nullable: true}
        serial: {type: integer, nullable: true}
        branch: {type: string, nullable: true}
        number: {type: string, nullable: true}
        participating_works: {type: string, nullable: true}
        participating_works_url: {type: string, nullable: true}
        publication_year: {type: integer, nullable: true}
        illustrator_name: {type: string, nullable: true}
        image_url: {type: string, nullable: true}
        thumbnail_image_url: {type: string, nullable: true}
        errata_enable: {type: boolean}
        errata_url: {type: string, nullable: true}
        display_card_bundle_names: {type: string}
    Stats:
      type: object
      properties:
        total_cards: {type: integer}
        rarity_distribution:
          type: object
          additionalProperties: {type: integer}
        feature_distribution:
          type: object
          additionalProperties: {type: integer}
        type_distribution:
          type: object
          additionalProperties: {type: integer}
        publication_year_distribution:
          type: object
          additionalProperties: {type: integer}
        top_25_ultras:
          type: object
          additionalProperties: {type: integer}
        top_25_kaiju:
          type: object
          additionalProperties: {type: integer}
    Error:
      type: object
      properties:
        error: {type: string}
security: []
